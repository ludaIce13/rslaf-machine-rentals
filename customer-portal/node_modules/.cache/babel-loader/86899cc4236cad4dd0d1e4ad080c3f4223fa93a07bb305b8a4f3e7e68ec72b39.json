{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vidai\\\\OneDrive\\\\Desktop\\\\smartrentals_mvp\\\\customer-portal\\\\src\\\\pages\\\\ProductDetail.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { getProduct, getAvailableItems, createOrder } from '../services/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProductDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const bookingRef = useRef(null);\n\n  // Mirror the demo mapping used in Products.js for images and categories\n  const demoMap = {\n    'EXC-CAT320-001': {\n      category: 'Excavator',\n      image: 'https://images.unsplash.com/photo-1616401784845-c97df2ce2e94?q=80&w=1200&auto=format&fit=crop'\n    },\n    'DMP-MACK-GRN-001': {\n      category: 'Dump Truck',\n      image: 'https://images.unsplash.com/photo-1635322160730-70a87dcc2069?q=80&w=1200&auto=format&fit=crop'\n    },\n    'BHL-JD-410L-001': {\n      category: 'Backhoe Loader',\n      image: 'https://images.unsplash.com/photo-1570126646281-5ec88111777d?q=80&w=1200&auto=format&fit=crop'\n    },\n    'WHL-CAT950M-001': {\n      category: 'Wheel Loader',\n      image: 'https://images.unsplash.com/photo-1581092921461-eab62e97a780?q=80&w=1200&auto=format&fit=crop'\n    },\n    'CRN-GRV-RT890E-001': {\n      category: 'Crane',\n      image: 'https://images.unsplash.com/photo-1541976076758-347942db197a?q=80&w=1200&auto=format&fit=crop'\n    },\n    'BLD-CAT-D6T-001': {\n      category: 'Bulldozer',\n      image: 'https://images.unsplash.com/photo-1574201635302-388dd92a4c22?q=80&w=1200&auto=format&fit=crop'\n    }\n  };\n  const getCategory = p => {\n    var _demoMap$p$sku;\n    return (p === null || p === void 0 ? void 0 : p.category) || (p === null || p === void 0 ? void 0 : p.type) || ((_demoMap$p$sku = demoMap[p === null || p === void 0 ? void 0 : p.sku]) === null || _demoMap$p$sku === void 0 ? void 0 : _demoMap$p$sku.category) || 'Equipment';\n  };\n  const getImage = p => {\n    var _demoMap$p$sku2;\n    return (p === null || p === void 0 ? void 0 : p.image_url) || (p === null || p === void 0 ? void 0 : p.image) || (p === null || p === void 0 ? void 0 : p.thumbnail_url) || ((_demoMap$p$sku2 = demoMap[p === null || p === void 0 ? void 0 : p.sku]) === null || _demoMap$p$sku2 === void 0 ? void 0 : _demoMap$p$sku2.image) || '';\n  };\n  const [loading, setLoading] = useState(true);\n  const [product, setProduct] = useState(null);\n  // Datetime strings in input[type=\"datetime-local\"] format (local time without Z)\n  const [startDt, setStartDt] = useState('');\n  const [endDt, setEndDt] = useState('');\n  const [hours, setHours] = useState(''); // string to bind to input, we'll parse to number\n  const [checking, setChecking] = useState(false);\n  const [availableItems, setAvailableItems] = useState([]);\n  const [selectedItemId, setSelectedItemId] = useState('');\n  const [booking, setBooking] = useState(false);\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const res = await getProduct(id);\n        setProduct(res.data);\n      } catch (e) {\n        console.error(e);\n        toast.error('Failed to load product');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [id]);\n\n  // On first load, scroll to booking section so the user can proceed\n  useEffect(() => {\n    const t = setTimeout(() => {\n      var _bookingRef$current;\n      return (_bookingRef$current = bookingRef.current) === null || _bookingRef$current === void 0 ? void 0 : _bookingRef$current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start'\n      });\n    }, 100);\n    return () => clearTimeout(t);\n  }, []);\n\n  // Prefill datetimes from query params and auto-check when both are present\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const s = params.get('start') || '';\n    const e = params.get('end') || '';\n    let changed = false;\n    if (s && s !== startDt) {\n      setStartDt(s);\n      changed = true;\n    }\n    if (e && e !== endDt) {\n      setEndDt(e);\n      changed = true;\n    }\n    if (changed && s && e) {\n      // defer to ensure state updated before check\n      setTimeout(() => {\n        onCheck();\n      }, 0);\n      // Auto-scroll to booking section so user can proceed immediately\n      setTimeout(() => {\n        var _bookingRef$current2;\n        (_bookingRef$current2 = bookingRef.current) === null || _bookingRef$current2 === void 0 ? void 0 : _bookingRef$current2.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start'\n        });\n      }, 50);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.search]);\n\n  // Derived hours and days\n  const derived = useMemo(() => {\n    if (!startDt || !endDt) return {\n      hours: 0,\n      days: 0\n    };\n    const s = new Date(startDt);\n    const e = new Date(endDt);\n    const ms = e - s;\n    if (ms <= 0) return {\n      hours: 0,\n      days: 0\n    };\n    const hrs = Math.ceil(ms / (1000 * 60 * 60));\n    const dys = ms / (1000 * 60 * 60 * 24);\n    return {\n      hours: hrs,\n      days: dys\n    };\n  }, [startDt, endDt]);\n  const estimate = useMemo(() => {\n    if (!product) return 0;\n    // Prefer hourly pricing when available\n    if ((product.hourly_rate || 0) > 0) {\n      if (!derived.hours) return 0;\n      return Math.round(product.hourly_rate * derived.hours * 100) / 100;\n    }\n    if (!derived.days) return 0;\n    return Math.round((product.daily_rate || 0) * derived.days * 100) / 100;\n  }, [product, derived]);\n\n  // Two-way sync: when start or hours changes, recompute end; when end changes, recompute hours.\n  useEffect(() => {\n    if (!startDt || hours === '') return;\n    const h = Math.max(0, parseInt(hours, 10) || 0);\n    if (h === 0) return;\n    const s = new Date(startDt);\n    const newEnd = new Date(s.getTime() + h * 3600 * 1000);\n    const pad = n => String(n).padStart(2, '0');\n    const localISO = `${newEnd.getFullYear()}-${pad(newEnd.getMonth() + 1)}-${pad(newEnd.getDate())}T${pad(newEnd.getHours())}:${pad(newEnd.getMinutes())}`;\n    setEndDt(prev => prev !== localISO ? localISO : prev);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [startDt, hours]);\n  useEffect(() => {\n    if (!startDt || !endDt) return;\n    const s = new Date(startDt);\n    const e = new Date(endDt);\n    const ms = e - s;\n    const hrs = ms > 0 ? Math.ceil(ms / 3600000) : 0;\n    const next = hrs ? String(hrs) : '';\n    setHours(prev => prev !== next ? next : prev);\n  }, [startDt, endDt]);\n  const onCheck = async () => {\n    if (!startDt || !endDt) {\n      toast.info('Please select a start and end date');\n      return;\n    }\n    if (derived.hours <= 0) {\n      toast.warn('End date must be after start date');\n      return;\n    }\n    // Enforce product hours constraints if provided\n    const minH = (product === null || product === void 0 ? void 0 : product.min_hours) || 0;\n    const maxH = (product === null || product === void 0 ? void 0 : product.max_hours) || null;\n    if (minH && derived.hours < minH) {\n      toast.warn(`Minimum rental is ${minH} hour${minH === 1 ? '' : 's'}`);\n      return;\n    }\n    if (maxH && derived.hours > maxH) {\n      toast.warn(`Maximum rental is ${maxH} hours`);\n      return;\n    }\n    try {\n      var _res$data;\n      setChecking(true);\n      const res = await getAvailableItems(id, new Date(startDt).toISOString(), new Date(endDt).toISOString());\n      const items = Array.isArray(res.data) ? res.data : ((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.items) || [];\n      setAvailableItems(items);\n      if (items.length === 0) {\n        toast.warn('No units available for the selected period');\n      } else {\n        var _items$;\n        setSelectedItemId(((_items$ = items[0]) === null || _items$ === void 0 ? void 0 : _items$.id) || '');\n        toast.success('Availability confirmed');\n      }\n    } catch (e) {\n      console.error(e);\n      toast.error('Failed to check availability');\n    } finally {\n      setChecking(false);\n    }\n  };\n  const onBook = async () => {\n    if (!selectedItemId) {\n      toast.info('Please select an available unit');\n      return;\n    }\n    const minH = (product === null || product === void 0 ? void 0 : product.min_hours) || 0;\n    const maxH = (product === null || product === void 0 ? void 0 : product.max_hours) || null;\n    if (minH && derived.hours < minH) {\n      toast.warn(`Minimum rental is ${minH} hour${minH === 1 ? '' : 's'}`);\n      return;\n    }\n    if (maxH && derived.hours > maxH) {\n      toast.warn(`Maximum rental is ${maxH} hours`);\n      return;\n    }\n    try {\n      setBooking(true);\n      const payload = {\n        reservations: [{\n          inventory_item_id: selectedItemId,\n          start_date: new Date(startDt).toISOString(),\n          end_date: new Date(endDt).toISOString()\n        }]\n      };\n      const res = await createOrder(payload);\n      toast.success('Booking created');\n      navigate('/orders');\n    } catch (e) {\n      var _e$response, _e$response$data;\n      console.error(e);\n      const msg = (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.detail) || 'Failed to create booking';\n      toast.error(msg);\n    } finally {\n      setBooking(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        padding: '2rem 0',\n        textAlign: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading product...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 7\n    }, this);\n  }\n  if (!product) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        padding: '2rem 0',\n        textAlign: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Product not found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/products\",\n        className: \"btn btn-primary\",\n        children: \"\\u2190 Back to Products\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      padding: '2rem 0'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        maxWidth: 1100,\n        margin: '0 auto',\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr',\n        gap: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: 'relative',\n            height: 320,\n            borderRadius: 12,\n            overflow: 'hidden',\n            background: '#f0f2f5'\n          },\n          children: [getImage(product) ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: getImage(product),\n            alt: product.name,\n            style: {\n              width: '100%',\n              height: '100%',\n              objectFit: 'cover'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              height: '100%',\n              background: 'linear-gradient(135deg,#667eea,#764ba2)'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              position: 'absolute',\n              top: 12,\n              right: 12,\n              background: '#ff7f32',\n              color: '#fff',\n              padding: '6px 10px',\n              borderRadius: 999,\n              fontSize: 12,\n              fontWeight: 700\n            },\n            children: getCategory(product)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            marginTop: '1rem',\n            color: '#2c3e50'\n          },\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#6c757d'\n          },\n          children: product.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '0.5rem',\n            color: '#2c3e50',\n            fontWeight: 600\n          },\n          children: (product.hourly_rate || 0) > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"$\", product.hourly_rate, \"/hour\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"$\", product.daily_rate, \"/day\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: bookingRef,\n        style: {\n          background: '#fff',\n          border: '1px solid #e9ecef',\n          borderRadius: 12,\n          padding: '1.25rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          style: {\n            marginTop: 0,\n            color: '#2c3e50'\n          },\n          children: \"Book this equipment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gap: '0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: 14,\n                color: '#2c3e50',\n                marginBottom: 4\n              },\n              children: \"Start\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"datetime-local\",\n              value: startDt,\n              onChange: e => setStartDt(e.target.value),\n              style: {\n                width: '100%',\n                padding: '0.6rem',\n                borderRadius: 8,\n                border: '1px solid #e1e5ea'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: {\n                display: 'block',\n                fontSize: 14,\n                color: '#2c3e50',\n                marginBottom: 4\n              },\n              children: \"End\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"datetime-local\",\n              value: endDt,\n              onChange: e => setEndDt(e.target.value),\n              style: {\n                width: '100%',\n                padding: '0.6rem',\n                borderRadius: 8,\n                border: '1px solid #e1e5ea'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              fontSize: 14,\n              color: '#2c3e50',\n              marginBottom: 4\n            },\n            children: \"Hours\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            step: \"1\",\n            placeholder: \"e.g. 100\",\n            value: hours,\n            onChange: e => setHours(e.target.value),\n            style: {\n              width: '100%',\n              padding: '0.6rem',\n              borderRadius: 8,\n              border: '1px solid #e1e5ea'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), startDt && hours && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 6,\n              fontSize: 12,\n              color: '#6c757d'\n            },\n            children: [\"Return by: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: endDt || '—'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 28\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), ((product === null || product === void 0 ? void 0 : product.min_hours) || (product === null || product === void 0 ? void 0 : product.max_hours)) && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 6,\n              fontSize: 12,\n              color: '#6c757d'\n            },\n            children: [product !== null && product !== void 0 && product.min_hours ? `Minimum: ${product.min_hours}h` : '', product !== null && product !== void 0 && product.min_hours && product !== null && product !== void 0 && product.max_hours ? ' • ' : '', product !== null && product !== void 0 && product.max_hours ? `Maximum: ${product.max_hours}h` : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '0.5rem',\n            marginTop: '0.75rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onCheck,\n            disabled: checking || !startDt || !endDt,\n            className: \"btn btn-primary\",\n            style: {\n              background: '#1b7a23'\n            },\n            children: checking ? 'Checking…' : 'Check Availability'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/products\",\n            className: \"btn btn-outline\",\n            children: \"Back to Catalog\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), availableItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginTop: '1rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'block',\n              fontSize: 14,\n              color: '#2c3e50',\n              marginBottom: 4\n            },\n            children: \"Select unit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedItemId,\n            onChange: e => setSelectedItemId(e.target.value),\n            style: {\n              width: '100%',\n              padding: '0.6rem',\n              borderRadius: 8,\n              border: '1px solid #e1e5ea'\n            },\n            children: availableItems.map(it => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: it.id,\n              children: [\"#\", it.id, \" \", it.serial ? `• ${it.serial}` : '']\n            }, it.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '0.75rem',\n              padding: '0.75rem',\n              background: '#f8fafc',\n              borderRadius: 8,\n              border: '1px solid #e9ecef'\n            },\n            children: [(product.hourly_rate || 0) > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Hours\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 282,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: derived.hours\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  marginTop: 6\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Rate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"$\", product.hourly_rate, \"/hour\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Days\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 293,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: Math.max(1, Math.ceil(derived.days))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 294,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  marginTop: 6\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Rate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: [\"$\", product.daily_rate, \"/day\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                marginTop: 6\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Estimated total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [\"$\", estimate]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onBook,\n            disabled: booking,\n            className: \"btn btn-primary\",\n            style: {\n              marginTop: '0.75rem',\n              background: '#1b7a23'\n            },\n            children: booking ? 'Booking…' : 'Book Now'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductDetail, \"WXNSA/00G5YdbrWQ0XweKBP7Kq0=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = ProductDetail;\nexport default ProductDetail;\nvar _c;\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useParams","Link","useNavigate","useLocation","toast","getProduct","getAvailableItems","createOrder","jsxDEV","_jsxDEV","Fragment","_Fragment","ProductDetail","_s","id","navigate","location","bookingRef","demoMap","category","image","getCategory","p","_demoMap$p$sku","type","sku","getImage","_demoMap$p$sku2","image_url","thumbnail_url","loading","setLoading","product","setProduct","startDt","setStartDt","endDt","setEndDt","hours","setHours","checking","setChecking","availableItems","setAvailableItems","selectedItemId","setSelectedItemId","booking","setBooking","load","res","data","e","console","error","t","setTimeout","_bookingRef$current","current","scrollIntoView","behavior","block","clearTimeout","params","URLSearchParams","search","s","get","changed","onCheck","_bookingRef$current2","derived","days","Date","ms","hrs","Math","ceil","dys","estimate","hourly_rate","round","daily_rate","h","max","parseInt","newEnd","getTime","pad","n","String","padStart","localISO","getFullYear","getMonth","getDate","getHours","getMinutes","prev","next","info","warn","minH","min_hours","maxH","max_hours","_res$data","toISOString","items","Array","isArray","length","_items$","success","onBook","payload","reservations","inventory_item_id","start_date","end_date","_e$response","_e$response$data","msg","response","detail","className","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","to","maxWidth","margin","display","gridTemplateColumns","gap","position","height","borderRadius","overflow","background","src","alt","name","width","objectFit","top","right","color","fontSize","fontWeight","marginTop","description","ref","border","marginBottom","value","onChange","target","min","step","placeholder","onClick","disabled","map","it","serial","justifyContent","_c","$RefreshReg$"],"sources":["C:/Users/vidai/OneDrive/Desktop/smartrentals_mvp/customer-portal/src/pages/ProductDetail.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\nimport { useParams, Link, useNavigate, useLocation } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { getProduct, getAvailableItems, createOrder } from '../services/api';\n\nconst ProductDetail = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const bookingRef = useRef(null);\n\n  // Mirror the demo mapping used in Products.js for images and categories\n  const demoMap = {\n    'EXC-CAT320-001': { category: 'Excavator', image: 'https://images.unsplash.com/photo-1616401784845-c97df2ce2e94?q=80&w=1200&auto=format&fit=crop' },\n    'DMP-MACK-GRN-001': { category: 'Dump Truck', image: 'https://images.unsplash.com/photo-1635322160730-70a87dcc2069?q=80&w=1200&auto=format&fit=crop' },\n    'BHL-JD-410L-001': { category: 'Backhoe Loader', image: 'https://images.unsplash.com/photo-1570126646281-5ec88111777d?q=80&w=1200&auto=format&fit=crop' },\n    'WHL-CAT950M-001': { category: 'Wheel Loader', image: 'https://images.unsplash.com/photo-1581092921461-eab62e97a780?q=80&w=1200&auto=format&fit=crop' },\n    'CRN-GRV-RT890E-001': { category: 'Crane', image: 'https://images.unsplash.com/photo-1541976076758-347942db197a?q=80&w=1200&auto=format&fit=crop' },\n    'BLD-CAT-D6T-001': { category: 'Bulldozer', image: 'https://images.unsplash.com/photo-1574201635302-388dd92a4c22?q=80&w=1200&auto=format&fit=crop' },\n  };\n\n  const getCategory = (p) => p?.category || p?.type || demoMap[p?.sku]?.category || 'Equipment';\n  const getImage = (p) => p?.image_url || p?.image || p?.thumbnail_url || demoMap[p?.sku]?.image || '';\n\n  const [loading, setLoading] = useState(true);\n  const [product, setProduct] = useState(null);\n  // Datetime strings in input[type=\"datetime-local\"] format (local time without Z)\n  const [startDt, setStartDt] = useState('');\n  const [endDt, setEndDt] = useState('');\n  const [hours, setHours] = useState(''); // string to bind to input, we'll parse to number\n  const [checking, setChecking] = useState(false);\n  const [availableItems, setAvailableItems] = useState([]);\n  const [selectedItemId, setSelectedItemId] = useState('');\n  const [booking, setBooking] = useState(false);\n\n  useEffect(() => {\n    const load = async () => {\n      try {\n        const res = await getProduct(id);\n        setProduct(res.data);\n      } catch (e) {\n        console.error(e);\n        toast.error('Failed to load product');\n      } finally {\n        setLoading(false);\n      }\n    };\n    load();\n  }, [id]);\n\n  // On first load, scroll to booking section so the user can proceed\n  useEffect(() => {\n    const t = setTimeout(() => bookingRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);\n    return () => clearTimeout(t);\n  }, []);\n\n  // Prefill datetimes from query params and auto-check when both are present\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const s = params.get('start') || '';\n    const e = params.get('end') || '';\n    let changed = false;\n    if (s && s !== startDt) { setStartDt(s); changed = true; }\n    if (e && e !== endDt) { setEndDt(e); changed = true; }\n    if (changed && s && e) {\n      // defer to ensure state updated before check\n      setTimeout(() => { onCheck(); }, 0);\n      // Auto-scroll to booking section so user can proceed immediately\n      setTimeout(() => { bookingRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' }); }, 50);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location.search]);\n\n  // Derived hours and days\n  const derived = useMemo(() => {\n    if (!startDt || !endDt) return { hours: 0, days: 0 };\n    const s = new Date(startDt);\n    const e = new Date(endDt);\n    const ms = e - s;\n    if (ms <= 0) return { hours: 0, days: 0 };\n    const hrs = Math.ceil(ms / (1000 * 60 * 60));\n    const dys = ms / (1000 * 60 * 60 * 24);\n    return { hours: hrs, days: dys };\n  }, [startDt, endDt]);\n\n  const estimate = useMemo(() => {\n    if (!product) return 0;\n    // Prefer hourly pricing when available\n    if ((product.hourly_rate || 0) > 0) {\n      if (!derived.hours) return 0;\n      return Math.round((product.hourly_rate * derived.hours) * 100) / 100;\n    }\n    if (!derived.days) return 0;\n    return Math.round((product.daily_rate || 0) * derived.days * 100) / 100;\n  }, [product, derived]);\n\n  // Two-way sync: when start or hours changes, recompute end; when end changes, recompute hours.\n  useEffect(() => {\n    if (!startDt || hours === '') return;\n    const h = Math.max(0, parseInt(hours, 10) || 0);\n    if (h === 0) return;\n    const s = new Date(startDt);\n    const newEnd = new Date(s.getTime() + h * 3600 * 1000);\n    const pad = (n) => String(n).padStart(2, '0');\n    const localISO = `${newEnd.getFullYear()}-${pad(newEnd.getMonth()+1)}-${pad(newEnd.getDate())}T${pad(newEnd.getHours())}:${pad(newEnd.getMinutes())}`;\n    setEndDt((prev) => prev !== localISO ? localISO : prev);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [startDt, hours]);\n\n  useEffect(() => {\n    if (!startDt || !endDt) return;\n    const s = new Date(startDt);\n    const e = new Date(endDt);\n    const ms = e - s;\n    const hrs = ms > 0 ? Math.ceil(ms / 3600000) : 0;\n    const next = hrs ? String(hrs) : '';\n    setHours((prev) => prev !== next ? next : prev);\n  }, [startDt, endDt]);\n\n  const onCheck = async () => {\n    if (!startDt || !endDt) {\n      toast.info('Please select a start and end date');\n      return;\n    }\n    if (derived.hours <= 0) {\n      toast.warn('End date must be after start date');\n      return;\n    }\n    // Enforce product hours constraints if provided\n    const minH = product?.min_hours || 0;\n    const maxH = product?.max_hours || null;\n    if (minH && derived.hours < minH) {\n      toast.warn(`Minimum rental is ${minH} hour${minH===1?'':'s'}`);\n      return;\n    }\n    if (maxH && derived.hours > maxH) {\n      toast.warn(`Maximum rental is ${maxH} hours`);\n      return;\n    }\n    try {\n      setChecking(true);\n      const res = await getAvailableItems(id, new Date(startDt).toISOString(), new Date(endDt).toISOString());\n      const items = Array.isArray(res.data) ? res.data : (res.data?.items || []);\n      setAvailableItems(items);\n      if (items.length === 0) {\n        toast.warn('No units available for the selected period');\n      } else {\n        setSelectedItemId(items[0]?.id || '');\n        toast.success('Availability confirmed');\n      }\n    } catch (e) {\n      console.error(e);\n      toast.error('Failed to check availability');\n    } finally {\n      setChecking(false);\n    }\n  };\n\n  const onBook = async () => {\n    if (!selectedItemId) {\n      toast.info('Please select an available unit');\n      return;\n    }\n    const minH = product?.min_hours || 0;\n    const maxH = product?.max_hours || null;\n    if (minH && derived.hours < minH) {\n      toast.warn(`Minimum rental is ${minH} hour${minH===1?'':'s'}`);\n      return;\n    }\n    if (maxH && derived.hours > maxH) {\n      toast.warn(`Maximum rental is ${maxH} hours`);\n      return;\n    }\n    try {\n      setBooking(true);\n      const payload = {\n        reservations: [\n          { inventory_item_id: selectedItemId, start_date: new Date(startDt).toISOString(), end_date: new Date(endDt).toISOString() }\n        ]\n      };\n      const res = await createOrder(payload);\n      toast.success('Booking created');\n      navigate('/orders');\n    } catch (e) {\n      console.error(e);\n      const msg = e?.response?.data?.detail || 'Failed to create booking';\n      toast.error(msg);\n    } finally {\n      setBooking(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"container\" style={{ padding: '2rem 0', textAlign: 'center' }}>\n        <p>Loading product...</p>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"container\" style={{ padding: '2rem 0', textAlign: 'center' }}>\n        <p>Product not found.</p>\n        <Link to=\"/products\" className=\"btn btn-primary\">← Back to Products</Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"container\" style={{ padding: '2rem 0' }}>\n      <div style={{ maxWidth: 1100, margin: '0 auto', display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '2rem' }}>\n        <div>\n          <div style={{ position: 'relative', height: 320, borderRadius: 12, overflow: 'hidden', background: '#f0f2f5' }}>\n            {getImage(product) ? (\n              <img src={getImage(product)} alt={product.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n            ) : (\n              <div style={{ height: '100%', background: 'linear-gradient(135deg,#667eea,#764ba2)' }} />\n            )}\n            <span style={{ position: 'absolute', top: 12, right: 12, background: '#ff7f32', color: '#fff', padding: '6px 10px', borderRadius: 999, fontSize: 12, fontWeight: 700 }}>{getCategory(product)}</span>\n          </div>\n          <h1 style={{ marginTop: '1rem', color: '#2c3e50' }}>{product.name}</h1>\n          <p style={{ color: '#6c757d' }}>{product.description}</p>\n          <div style={{ marginTop: '0.5rem', color: '#2c3e50', fontWeight: 600 }}>\n            {(product.hourly_rate || 0) > 0 ? (\n              <>${product.hourly_rate}/hour</>\n            ) : (\n              <>${product.daily_rate}/day</>\n            )}\n          </div>\n        </div>\n\n        <div ref={bookingRef} style={{ background: '#fff', border: '1px solid #e9ecef', borderRadius: 12, padding: '1.25rem' }}>\n          <h2 style={{ marginTop: 0, color: '#2c3e50' }}>Book this equipment</h2>\n          <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '0.75rem' }}>\n            <div>\n              <label style={{ display: 'block', fontSize: 14, color: '#2c3e50', marginBottom: 4 }}>Start</label>\n              <input type=\"datetime-local\" value={startDt} onChange={(e)=>setStartDt(e.target.value)} style={{ width: '100%', padding: '0.6rem', borderRadius: 8, border: '1px solid #e1e5ea' }} />\n            </div>\n            <div>\n              <label style={{ display: 'block', fontSize: 14, color: '#2c3e50', marginBottom: 4 }}>End</label>\n              <input type=\"datetime-local\" value={endDt} onChange={(e)=>setEndDt(e.target.value)} style={{ width: '100%', padding: '0.6rem', borderRadius: 8, border: '1px solid #e1e5ea' }} />\n            </div>\n          </div>\n          <div style={{ marginTop: '0.75rem' }}>\n            <label style={{ display: 'block', fontSize: 14, color: '#2c3e50', marginBottom: 4 }}>Hours</label>\n            <input type=\"number\" min=\"1\" step=\"1\" placeholder=\"e.g. 100\" value={hours} onChange={(e)=>setHours(e.target.value)} style={{ width: '100%', padding: '0.6rem', borderRadius: 8, border: '1px solid #e1e5ea' }} />\n            {(startDt && hours) && (\n              <div style={{ marginTop: 6, fontSize: 12, color: '#6c757d' }}>\n                Return by: <strong>{endDt || '—'}</strong>\n              </div>\n            )}\n            {(product?.min_hours || product?.max_hours) && (\n              <div style={{ marginTop: 6, fontSize: 12, color: '#6c757d' }}>\n                {product?.min_hours ? `Minimum: ${product.min_hours}h` : ''}\n                {product?.min_hours && product?.max_hours ? ' • ' : ''}\n                {product?.max_hours ? `Maximum: ${product.max_hours}h` : ''}\n              </div>\n            )}\n          </div>\n\n          <div style={{ display: 'flex', gap: '0.5rem', marginTop: '0.75rem' }}>\n            <button onClick={onCheck} disabled={checking || !startDt || !endDt} className=\"btn btn-primary\" style={{ background: '#1b7a23' }}>\n              {checking ? 'Checking…' : 'Check Availability'}\n            </button>\n            <Link to=\"/products\" className=\"btn btn-outline\">Back to Catalog</Link>\n          </div>\n\n          {availableItems.length > 0 && (\n            <div style={{ marginTop: '1rem' }}>\n              <label style={{ display: 'block', fontSize: 14, color: '#2c3e50', marginBottom: 4 }}>Select unit</label>\n              <select value={selectedItemId} onChange={(e)=>setSelectedItemId(e.target.value)} style={{ width: '100%', padding: '0.6rem', borderRadius: 8, border: '1px solid #e1e5ea' }}>\n                {availableItems.map((it) => (\n                  <option key={it.id} value={it.id}>#{it.id} {it.serial ? `• ${it.serial}` : ''}</option>\n                ))}\n              </select>\n\n              <div style={{ marginTop: '0.75rem', padding: '0.75rem', background: '#f8fafc', borderRadius: 8, border: '1px solid #e9ecef' }}>\n                {(product.hourly_rate || 0) > 0 ? (\n                  <>\n                    <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                      <span>Hours</span>\n                      <strong>{derived.hours}</strong>\n                    </div>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: 6 }}>\n                      <span>Rate</span>\n                      <strong>${product.hourly_rate}/hour</strong>\n                    </div>\n                  </>\n                ) : (\n                  <>\n                    <div style={{ display: 'flex', justifyContent: 'space-between' }}>\n                      <span>Days</span>\n                      <strong>{Math.max(1, Math.ceil(derived.days))}</strong>\n                    </div>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: 6 }}>\n                      <span>Rate</span>\n                      <strong>${product.daily_rate}/day</strong>\n                    </div>\n                  </>\n                )}\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: 6 }}>\n                  <span>Estimated total</span>\n                  <strong>${estimate}</strong>\n                </div>\n              </div>\n\n              <button onClick={onBook} disabled={booking} className=\"btn btn-primary\" style={{ marginTop: '0.75rem', background: '#1b7a23' }}>\n                {booking ? 'Booking…' : 'Book Now'}\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}